import matplotlib.pyplot as plt
import numpy as np

# 输入数据
veh = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 0, 0, 1, 0, 2, 1, 0, 1, 2, 2]
tour = [42, 41, 36, 3, 0, 52, 24, 33, 0, 11, 27, 48, 43, 0, 1, 47, 46, 4, 0, 19, 45, 40, 0, 26, 29, 57, 50, 0, 51, 39, 16, 9, 54, 0, 25, 21, 12, 31, 10, 58, 55, 34, 28, 22, 32, 0, 2, 15, 60, 49, 59, 0, 37, 35, 23, 53, 5, 20, 6, 18, 13, 0, 0, 44, 17, 56, 38, 8, 30, 7, 0, 0, 0, 14, 0, 0]
loc = np.array([
    [0.8667, 0.6718], [0.3959, 0.5674], [0.8396, 0.7350], [0.9611, 0.9731], [0.1319, 0.7486], [0.1615, 0.7985],
    [0.3097, 0.9314], [0.6317, 0.9146], [0.0358, 0.0807], [0.1599, 0.1711], [0.8329, 0.0855], [0.4888, 0.5672],
    [0.4051, 0.8034], [0.9050, 0.8916], [0.3403, 0.5282], [0.0431, 0.0861], [0.5633, 0.7494], [0.1985, 0.7454],
    [0.7084, 0.6467], [0.0872, 0.7648], [0.4201, 0.5018], [0.1513, 0.3666], [0.0486, 0.5701], [0.7719, 0.3533],
    [0.4940, 0.3205], [0.4224, 0.1513], [0.6440, 0.0929], [0.0401, 0.3876], [0.4267, 0.0853], [0.3333, 0.7645],
    [0.2342, 0.2381], [0.1696, 0.5428], [0.5695, 0.4010], [0.0032, 0.3167], [0.1681, 0.6548], [0.8254, 0.4145],
    [0.2604, 0.7269], [0.8073, 0.9579], [0.2508, 0.0193], [0.4890, 0.5029], [0.9974, 0.3992], [0.9718, 0.5265],
    [0.5309, 0.1779], [0.5734, 0.7770], [0.5874, 0.5691], [0.9738, 0.8310], [0.9344, 0.7062], [0.6130, 0.1814],
    [0.2849, 0.5632], [0.4278, 0.1103], [0.3893, 0.0404], [0.8776, 0.4778], [0.1395, 0.6341], [0.0237, 0.1933],
    [0.0404, 0.2847], [0.2466, 0.7028], [0.4122, 0.0537], [0.1139, 0.3063], [0.3851, 0.6436], [0.3133, 0.5587]
])

# 创建图形
plt.figure(figsize=(15, 10))

# 绘制节点
for i, (x, y) in enumerate(loc):
    plt.scatter(x, y, c='blue', s=50)
    plt.text(x, y, str(i), fontsize=12, ha='right')

# 绘制路径
colors = ['red', 'green', 'blue']  # 为不同的车辆设置不同的颜色
capacities = {0: 20, 1: 25, 2: 30}
for i in range(len(tour) - 1):
    start = tour[i]
    end = tour[i + 1]
    if start < len(loc) and end < len(loc):
        plt.plot([loc[start][0], loc[end][0]], [loc[start][1], loc[end][1]], color=colors[veh[i]])

# 标注起点
plt.scatter(loc[0][0], loc[0][1], c='black', s=100, label='Depot')

# 添加车辆编号和容量注释
vehicle_info = "\n".join([f"Vehicle {i} (Capacity {capacities[i]}): {colors[i]}" for i in capacities])
plt.text(0.01, 0.99, vehicle_info, transform=plt.gca().transAxes, fontsize=12, verticalalignment='top', bbox=dict(facecolor='white', alpha=0.5))

plt.title('Vehicle Routing Problem Solution')
plt.xlabel('X coordinate')
plt.ylabel('Y coordinate')
plt.legend()
plt.grid(True)
plt.show()
